services:
  zitadel:
    image: ghcr.io/zitadel/zitadel:latest
    container_name: zitadel
    restart: unless-stopped
    env_file:
      - ${OPS_ROOT:-../../../}/etc/global.env
      - ${OPS_ROOT:-../../../}/etc/srv/foundation.zitadel.env
    networks:
      - net_internal
    labels:
      - caddy=${ZITADEL_HOST}
      - caddy.reverse_proxy=zitadel:${ZITADEL_INTERNAL_PORT}
    # NOTE: ZITADEL command/config is version-specific. Fill via env/command as per official docs.

networks:
  net_internal:
    external: true
    name: net_internal
